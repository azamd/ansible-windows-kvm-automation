---
- name: Get current adapter name
  ansible.windows.win_shell: |
    (Get-NetAdapter | Where-Object { $_.Status -eq "Up" } | Select-Object -First 1).Name
  register: active_adapter

- name: Configure DNS Servers
  ansible.windows.win_dns_client:
    adapter_names: "{{ active_adapter.stdout | trim }}"
    dns_servers: "{{ dns_servers }}"
